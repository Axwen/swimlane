{"version":3,"file":"js/app.6bf8581c.js","mappings":"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","sources":["webpack://swimlane/./src/swimlane/matrix.js","webpack://swimlane/./src/swimlane/utils.js","webpack://swimlane/./src/swimlane/variables.js","webpack://swimlane/./src/swimlane/shape/title.js","webpack://swimlane/./src/swimlane/shape/content.js","webpack://swimlane/./src/swimlane/transfrom.js","webpack://swimlane/./src/swimlane/style.js","webpack://swimlane/./src/swimlane/index.js","webpack://swimlane/./src/App.vue","webpack://swimlane/./src/App.vue?3859","webpack://swimlane/./src/main.js","webpack://swimlane/webpack/bootstrap","webpack://swimlane/webpack/runtime/chunk loaded","webpack://swimlane/webpack/runtime/compat get default export","webpack://swimlane/webpack/runtime/define property getters","webpack://swimlane/webpack/runtime/global","webpack://swimlane/webpack/runtime/hasOwnProperty shorthand","webpack://swimlane/webpack/runtime/make namespace object","webpack://swimlane/webpack/runtime/jsonp chunk loading","webpack://swimlane/webpack/startup"],"sourcesContent":["\nexport default class Matrix {\n    constructor(options) {\n        const { data, sizes } = options\n        if (Array.isArray(data) && data.length > 0) {\n            this.initByData(data)\n        }else{\n            this.initBySizes(sizes)\n        } \n    }\n\n    initBySizes([rows, cols] = []) {\n        if (rows < 2) {\n            throw new Error('rows length should be greater than 2');\n        }\n        if (cols < 2) {\n            throw new Error('cols length should be greater than 2');\n        }\n        this.rows = rows;\n        this.cols = cols;\n        this.data = Array.from({ length: rows }, () => Array(cols).fill(null));\n    }\n    initByData(data) {\n        if (!Array.isArray(data) || data.length === 0) {\n            return\n        }\n        let maxRow = 0;\n        let maxCol = 0;\n        data.forEach(item => {\n            const { index: [rowIndex, colIndex] } = item;\n            if (rowIndex > maxRow) maxRow = rowIndex;\n            if (colIndex > maxCol) maxCol = colIndex;\n        });\n\n        this.rows = maxRow + 1\n        this.cols = maxCol + 1\n\n        const matrix = Array.from({ length: this.rows }, () => Array(this.cols).fill(null));\n\n        data.forEach(item => {\n            const [rowIndex, colIndex] = item.index;\n            matrix[rowIndex][colIndex] = item;\n        });\n        this.data = matrix\n        console.log(this)\n    }\n    traverse(callback) {\n        for (let i = 0; i < this.rows; i++) {\n            for (let j = 0; j < this.cols; j++) {\n                callback(this.data[i][j], i, j);\n            }\n        }\n    }\n    flat() {\n        return this.data.flat()\n    }\n    sliceRow(start, end, flatten = false) {\n        if (start < 0 || end > this.rows) {\n            throw new Error('Invalid row index');\n        }\n        end = end || this.rows;\n        const data = this.data.slice(start, end)\n        return flatten ? data.flat() : data;\n    }\n    sliceCol(start, end, flatten = false) {\n        if (start < 0 || end > this.cols) {\n            throw new Error('Invalid row index');\n        }\n        end = end || this.cols;\n        const result = [];\n        const flattenResult = []\n        for (let i = 0; i < this.rows; i++) {\n            let row = []\n            for (let j = start; j < end; j++) {\n                const col = this.data[i][j]\n                row.push(col)\n                flattenResult.push(col);\n            }\n            result.push(row)\n        }\n        return flatten ? flattenResult : result\n    }\n\n    // 获取矩阵中的值\n    getValue(row, col) {\n        if (this.isValidIndex(row, col)) {\n            return this.data[row][col];\n        } else {\n            throw new Error('Invalid index');\n        }\n    }\n\n    // 设置矩阵中的值\n    setValue(row, col, value) {\n        if (this.isValidIndex(row, col)) {\n            this.data[row][col] = value;\n        } else {\n            throw new Error('Invalid index');\n        }\n    }\n\n    // 添加行\n    addRow(index, values = []) {\n        if (index > this.rows || 0 > index) {\n            throw new Error('Invalid row index');\n        }\n        if (values.length !== this.cols) {\n            throw new Error('Row length does not match the number of columns');\n        }\n        this.data.splice(index + 1, 0, values);\n        this.rows++;\n        this.updateRowIndexFrom(index)\n    }\n\n    // 删除行\n    removeRow(index) {\n        let removedItems = []\n        if (index >= 0 && index < this.rows) {\n            removedItems = this.data[index].flat()\n            this.data.splice(index, 1);\n            this.rows--;\n        } else {\n            throw new Error('Invalid row index');\n        }\n        this.updateRowIndexFrom(index - 1)\n        return removedItems\n    }\n\n\n    // 添加列\n    addColumn(index, values = []) {\n        if (index < 0 || index > this.cols) {\n            throw new Error('Invalid column index');\n        }\n\n        if (values.length !== this.rows) {\n            throw new Error('Column length does not match the number of rows');\n        }\n        for (let i = 0; i < this.rows; i++) {\n            this.data[i].splice(index + 1, 0, values[i]);\n        }\n        this.cols++;\n        this.updateColumnIndexFrom(index)\n    }\n\n    // 删除列\n    removeColumn(index) {\n        const removedItems = []\n        if (index >= 0 && index < this.cols) {\n            for (let i = 0; i < this.rows; i++) {\n                removedItems.push(this.data[i][index])\n                this.data[i].splice(index, 1);\n            }\n            this.cols--;\n        } else {\n            throw new Error('Invalid column index');\n        }\n        this.updateColumnIndexFrom(index - 1)\n        return removedItems\n    }\n\n    // 检查索引是否有效\n    isValidIndex(row, col) {\n        return row >= 0 && row < this.rows && col >= 0 && col < this.cols;\n    }\n    updateRowIndexFrom(startRow) {\n        if (startRow < 0 || startRow >= this.rows) {\n            throw new Error('Invalid start row index');\n        }\n        const baseRowItem = this.data[startRow]\n        let { y, height } = baseRowItem[0]\n        let startY = y + height\n        for (let i = startRow + 1; i < this.rows; i++) {\n            const row = this.data[i];\n            for (let j = 0; j < this.cols; j++) {\n                row[j]['index'] = [i, j]\n                row[j]['y'] = startY\n            }\n            const { height } = row[0]\n            startY += height\n        }\n    }\n    updateColumnIndexFrom(startCol) {\n        if (startCol < 0 || startCol >= this.cols) {\n            throw new Error('Invalid start column index');\n        }\n        for (let i = 0; i < this.rows; i++) {\n            const row = this.data[i][startCol]\n            const { x, width } = row\n            let startX = x + width;\n            for (let j = startCol + 1; j < this.cols; j++) {\n                const col = this.data[i][j];\n                this.data[i][j]['index'] = [i, j];\n                this.data[i][j]['x'] = startX;\n                const { width } = col\n                startX += width\n            }\n        }\n    }\n    // 批量更新某一行之后的所有行\n    updateRowFrom(startRow, values) {\n        if (startRow < 0 || startRow >= this.rows) {\n            throw new Error('Invalid start row index');\n        }\n        if (values.length !== this.cols) {\n            throw new Error('Values length does not match the number of columns');\n        }\n        for (let i = startRow; i < this.rows; i++) {\n            this.data[i] = [...values];\n        }\n    }\n\n    // 批量更新某一列之后的所有列\n    updateColumnFrom(startCol, values) {\n        if (startCol < 0 || startCol >= this.cols) {\n            throw new Error('Invalid start column index');\n        }\n        if (values.length !== this.rows) {\n            throw new Error('Values length does not match the number of rows');\n        }\n        for (let i = 0; i < this.rows; i++) {\n            for (let j = startCol; j < this.cols; j++) {\n                this.data[i][j] = values[i];\n            }\n        }\n    }\n}\n","/**\n * 生成 + 路径，适应给定矩形的宽高和描边宽度\n * @param {number} width - 矩形的宽度\n * @param {number} height - 矩形的高度\n * @param {number} strokeWidth - 描边宽度\n * @param {number} margin - 边距\n * @returns {string} - 十字形路径的 d 属性值\n */\n\n\nexport function getCrossPath({ width, height, strokeWidth, margin = 3 }) {\n\n    const horizontalLine = getLinePath({ width, height, strokeWidth, margin })\n    const verticalLine = getLinePath({ width, height, strokeWidth, margin }, false)\n    \n    return `${horizontalLine} ${verticalLine}`;\n}\n\n/**\n * 生成 - 路径，适应给定矩形的宽高和描边宽度\n * @param {number} width - 矩形的宽度\n * @param {number} height - 矩形的高度\n * @param {number} strokeWidth - 描边宽度\n * @param {number} margin - 边距\n * @returns {string} - 路径的 d 属性值\n */\nexport function getLinePath({ width, height, strokeWidth, margin = 3 }, isHorizontal = true) {\n    const size = Math.min(width, height) - 2 * margin - strokeWidth;\n    const offsetX = (width - size) / 2;\n    const offsetY = (height - size) / 2;\n\n    if (isHorizontal) {\n        const horizontalStartX = offsetX;\n        const horizontalStartY = offsetY + size / 2;\n        const horizontalEndX = offsetX + size;\n\n        return `M ${horizontalStartX} ${horizontalStartY} L ${horizontalEndX} ${horizontalStartY}`;\n    } else {\n\n        const verticalStartX = offsetX + size / 2;\n        const verticalStartY = offsetY;\n        const verticalEndY = offsetY + size;\n\n        return `M ${verticalStartX} ${verticalStartY} L ${verticalStartX} ${verticalEndY}`;\n    }\n\n}\n\n\n","export const fillColor = '#fff'\nexport const strokeColor = '#333'\nexport const strokeWidth = 1.5\nexport const labelColor = '#333'\n\nexport const swimLanePadding = 20\n\n\nexport const handerSize = 2\nexport const highlightHandlerSize = handerSize * 2\n\nexport const highlightColor = '#73d13d'\n\nexport const swimLaneBaseConfig = {\n    position: [100, 100],\n    sizes: [3, 3],\n    laneWidth: 300,\n    laneHeight: 300,\n    rowTitleHeight: 40,\n    columnTitleWidth: 100,\n}\n\n","\n\nimport { Graph, ObjectExt } from '@antv/x6'\nimport { Button } from '@antv/x6/es/registry/tool/button'\nimport { ElMessageBox } from 'element-plus'\n\nimport { getCrossPath, getLinePath } from '../utils'\nimport { fillColor, strokeColor, labelColor, strokeWidth } from '../variables'\n\nexport const BASE_LABEL = '请输入...'\n\nexport const ROW_HEIGHT = 300\nexport const COL_WIDTH = 100\n\nconst TITLE_BTN_WIDTH = 14\nconst TITLE_BTN_HEIGHT = 14\nconst RADIUS = 3\nconst MAIN_TITLE_LABEL_OFFSET = 8\n\nconst TITLE_BTN_RECT_ATTRS = {\n    width: TITLE_BTN_WIDTH,\n    height: TITLE_BTN_HEIGHT,\n    rx: RADIUS,\n    ry: RADIUS,\n    fill: fillColor,\n    stroke: strokeColor,\n    strokeWidth: strokeWidth,\n    cursor: 'pointer',\n}\n\nconst TITLE_BTN_ICON_ATTRS = {\n    fill: 'none',\n    stroke: strokeColor,\n    strokeWidth: strokeWidth,\n    pointerEvents: 'none',\n}\n\nfunction getTitleButtonToolMarkup(type) {\n    return [\n        {\n            tagName: 'rect',\n            selector: 'button',\n            attrs: TITLE_BTN_RECT_ATTRS,\n        },\n        {\n            tagName: 'path',\n            selector: 'icon',\n            attrs: {\n                ...TITLE_BTN_ICON_ATTRS,\n                d: type === 'add' ? getCrossPath(TITLE_BTN_RECT_ATTRS) : getLinePath(TITLE_BTN_RECT_ATTRS)\n            },\n        },\n    ]\n}\n\n\nconst addTitleButton = Button.define({\n    markup: getTitleButtonToolMarkup('add'),\n    onClick({ e, cell, view }) {\n        e.stopPropagation()\n        const { graph } = view\n        const { index } = cell.getData()\n        graph.swimlane.insert(index)\n    },\n});\n\nconst removeTitleButton = Button.define({\n    markup: getTitleButtonToolMarkup('remove'),\n    onClick({ e, cell, view }) {\n        e.stopPropagation()\n        const { graph } = view\n        const { index } = cell.getData()\n        const hasChildren = graph.swimlane.checkRowOrColHasChildren(index)\n        if (hasChildren) {\n            ElMessageBox.confirm('该泳道内存在内容，删除后会同步删除泳道内的内容，确认删除?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n\n                graph.swimlane.remove(index)\n            })\n            return\n        }\n        graph.swimlane.remove(index)\n    },\n})\n\nconst titleShape = {\n    inherit: 'rect',\n    attrs: {\n        body: {\n            strokeWidth: strokeWidth,\n            stroke: strokeColor,\n            fill: fillColor,\n        },\n        label: {\n            fontWeight: 'bold',\n            fill: labelColor,\n        }\n    },\n    propHooks(metadata) {\n        let { mainTitle, blank, subTitle, ...others } = metadata\n        if (mainTitle) {\n            ObjectExt.setByPath(others, 'attrs/label/textAnchor', 'start')\n            ObjectExt.setByPath(others, 'attrs/label/refX', MAIN_TITLE_LABEL_OFFSET)\n        }\n        if (blank) {\n            ObjectExt.setByPath(others, 'tools', [])\n            ObjectExt.setByPath(others, 'attrs/text/text', '')\n        }\n\n        ObjectExt.setByPath(others, 'subTitle', subTitle ?? (!mainTitle && !blank))\n\n        return others\n    },\n    tools: [\n        {\n            name: 'node-editor',\n            args: {\n                attrs: {\n                    color: '#999',\n                    backgroundColor: 'transparent',\n                },\n            },\n        },\n    ],\n}\n\nfunction isSwimLaneSubTitle(node) {\n    return node.shape === 'swimlane-title' && node.prop('subTitle')\n}\n\nfunction addTitleTools(node, graph) {\n    const { swimlane: { matrix, options: { sizes } } } = graph\n    const { index: [rowIndex] } = node.getData() || {}\n    const isRowTitle = rowIndex === 0\n    const addTool = {\n        name: 'title-add',\n        args: {\n            x: '100%',\n            y: '100%',\n            offset: { x: -20, y: -20 },\n        }\n    }\n\n    !node.hasTool(addTool.name) && node.addTools(addTool, { ignoreHistory: true })\n\n    // rowTitle增加列 colTitle增加行\n    const size = isRowTitle ? matrix.cols : matrix.rows\n    const minSize = isRowTitle ? sizes[0] -1 : sizes[1]-1\n    const removeTool = {\n        name: 'title-remove',\n        args: {\n            x: '100%',\n            y: '100%',\n            offset: { x: -38, y: -20 },\n        }\n    }\n    if (size > minSize && !node.hasTool(removeTool.name)) {\n        node.addTools(removeTool, { ignoreHistory: true })\n    }\n}\n\nfunction removeTitleTools(node) {\n    node.removeTool('title-add', { ignoreHistory: true })\n    node.removeTool('title-remove', { ignoreHistory: true })\n}\n\n\nfunction registrySwimlaneTitle() {\n    Graph.registerNode('swimlane-title', titleShape, true)\n    Graph.registerNodeTool('title-add', addTitleButton, true)\n    Graph.registerNodeTool('title-remove', removeTitleButton, true)\n}\n\nfunction titleMouseenter({ node, view }) {\n    const { graph } = view\n    if (isSwimLaneSubTitle(node)) {\n        addTitleTools(node, graph)\n    }\n}\n\nfunction titleMouseleave({ node }) {\n    if (isSwimLaneSubTitle(node)) {\n        removeTitleTools(node)\n    }\n}\n\nfunction bindTitleEvent(graph) {\n    graph.on('node:mouseenter', titleMouseenter)\n    graph.on('node:mouseleave', titleMouseleave)\n}\nfunction unbindTitleEvent(graph) {\n    graph.off('node:mouseenter', titleMouseenter)\n    graph.off('node:mouseleave', titleMouseleave)\n}\n\nexport {\n    registrySwimlaneTitle,\n    bindTitleEvent,\n    unbindTitleEvent\n}\n\n","import { Graph } from '@antv/x6'\n\nimport { fillColor, strokeWidth } from '../variables'\n\nconst contentShape = {\n    inherit: 'rect',\n    attrs: {\n        body: {\n            strokeWidth: strokeWidth,\n            fill: fillColor,\n        },\n    }\n}\n\n\nfunction registrySwimlaneContent() {\n    Graph.registerNode('swimlane-content', contentShape, true)\n}\n\nexport {\n    registrySwimlaneContent\n}","import { View, Dom, FunctionExt } from '@antv/x6'\nimport { swimLaneBaseConfig, swimLanePadding } from './variables'\n\nconst {\n    laneWidth,\n    laneHeight,\n    rowTitleHeight: minRowSize,\n    columnTitleWidth: minColSize,\n} = swimLaneBaseConfig\n\nconst documentEvents = {\n    mousemove: 'onMouseMove',\n    touchmove: 'onMouseMove',\n    mouseup: 'onMouseUp',\n    touchend: 'onMouseUp',\n}\n\nexport class TransfromImpl extends View {\n    constructor(options) {\n        super()\n        const { graph, ...others } = options\n        this.graph = graph\n        this.options = { ...others }\n        this.render()\n        this.startListening()\n    }\n    get containerClassName() {\n        return this.prefixClassName('swimlane-transform')\n    }\n    get contentClassName() {\n        return `${this.containerClassName}-content`\n    }\n    get handlerClassName() {\n        return `${this.containerClassName}-handler`\n    }\n    get swimlane() {\n        return this.graph.swimlane\n    }\n    get matrix() {\n        return this.swimlane.matrix\n    }\n    render() {\n        this.initContainer()\n        this.updateTransform()\n    }\n    initContainer() {\n        const container = this.container = Dom.createElement('div')\n        const content = this.content = Dom.createElement('div')\n        Dom.addClass(container, this.containerClassName)\n        Dom.addClass(content, this.contentClassName)\n        Dom.append(container, content)\n        Dom.append(this.graph.container, this.container)\n    }\n    updateHandlers() {\n        Dom.empty(this.content)\n        Dom.append(this.content, this.createHandlers())\n    }\n    createHorizontalHandlers() {\n        const { matrix: { data, rows } } = this\n        const handers = []\n        let top = 0\n        for (let i = 0; i < rows; i++) {\n            const row = data[i]\n            const { height } = row[0]\n            const handler = Dom.createElement('div')\n            Dom.addClass(handler, this.handlerClassName)\n            Dom.attr(handler, 'data-dir', 'horizontal')\n            Dom.attr(handler, 'data-index', i)\n            top = i === 0 ? height : top + height\n            Dom.css(handler, { top })\n            handers.push(handler)\n        }\n        return handers\n    }\n    createVerticalHandlers() {\n        const { matrix: { data, cols } } = this\n        const handers = []\n        const firstCols = data[0]\n        let left = 0\n        for (let j = 0; j < cols; j++) {\n            const col = firstCols[j]\n            const { width } = col\n            const handler = Dom.createElement('div')\n            Dom.addClass(handler, this.handlerClassName)\n            Dom.attr(handler, 'data-dir', 'vertical')\n            Dom.attr(handler, 'data-index', j)\n            left = j == 0 ? width : left + width\n            Dom.css(handler, { left })\n            handers.push(handler)\n        }\n        return handers\n    }\n    createHandlers() {\n        const horizontalHandlers = this.createHorizontalHandlers()\n        const verticalHandlers = this.createVerticalHandlers()\n        return horizontalHandlers.concat(verticalHandlers)\n    }\n    updateTransform() {\n        this.updateContainer()\n        this.updateHandlers()\n    }\n    updateContainer() {\n        const ctm = this.graph.matrix()\n        const bbox = this.swimlane.getBBox()\n        bbox.x *= ctm.a\n        bbox.x += ctm.e\n        bbox.y *= ctm.d\n        bbox.y += ctm.f\n        Dom.css(this.container, {\n            width: bbox.width,\n            height: bbox.height,\n            transform: `scale3d(${ctm.a},${ctm.d},1)`,\n            left: bbox.x,\n            top: bbox.y,\n        })\n    }\n    startListening() {\n        const { graph, updateTransform, updateContainer } = this\n        graph.on('translate', updateContainer, this)\n        graph.on('scale', updateContainer, this)\n        graph.on('swimlane:rendered', updateTransform, this)\n        graph.on('history:undo', updateTransform, this)\n        graph.on('history:redo', updateTransform, this)\n        this.delegateEvents({\n            [`mousedown .${this.handlerClassName}`]: 'startResizing',\n            [`touchstart .${this.handlerClassName}`]: 'startResizing',\n        })\n        this.delegateDocumentEvents(documentEvents)\n    }\n    stopListening() {\n        const { graph, updateTransform, updateContainer } = this\n        graph.off('translate', updateContainer, this)\n        graph.off('scale', updateContainer, this)\n        graph.off('swimlane:rendered', updateContainer, this)\n        graph.off('history:undo', updateTransform, this)\n        graph.off('history:redo', updateTransform, this)\n        this.undelegateEvents()\n        this.undelegateDocumentEvents()\n    }\n    startResizing(e) {\n        this.startHandler(e.target)\n        this.graph.view.undelegateEvents()\n    }\n    onMouseMove = FunctionExt.throttle((e) => {\n        if (!this.handler) {\n            return\n        }\n        const evt = this.normalizeEvent(e)\n        let clientX = evt.clientX\n        let clientY = evt.clientY\n        const { target, origin, dir, start, min, max } = this.handler\n        const pos = this.graph.clientToLocal(clientX, clientY)\n        const axis = dir === 'vertical' ? 'x' : 'y'\n        const positionKey = dir === 'vertical' ? 'left' : 'top'\n        const offset = pos[axis] - origin[axis] - start\n        let position = start + offset\n        position = Math.min(position, max)\n        position = Math.max(position, min)\n        Dom.css(target, {\n            [positionKey]: position\n        })\n        this.handler.offset = position - start\n    }, 16)\n    onMouseUp() {\n        if (!this.handler) {\n            return\n        }\n        if (this.handler.offset) {\n            this.resize()\n        }\n        this.updateContainer()\n        this.stopHandler()\n        this.graph.view.delegateEvents()\n    }\n    getMovableRange(dir, index) {\n        const { graph, matrix, swimlane } = this\n        const { x: originX, y: originY } = swimlane.getBBox()\n        let swimLaneItems = []\n        const currentChildren = []\n        const swimLaneNodes = []\n        index = Number(index)\n        const nextIndex = index + 1\n        if (dir === 'vertical') {\n            swimLaneItems = matrix.sliceCol(index, nextIndex, true)\n        } else {\n            swimLaneItems = matrix.sliceRow(index, index + 1, true)\n        }\n        swimLaneItems.forEach(item => {\n            const { id } = item\n            const node = this.graph.getCellById(id)\n            const children = node.getChildren() || []\n            swimLaneNodes.push(node)\n            currentChildren.push(...children)\n        })\n\n        const { top, bottom, left, right } = graph.getCellsBBox(swimLaneNodes)\n\n        let min = 0\n        let max = 0\n        if (dir === 'vertical') {\n            min = left - originX + minColSize\n            max = right - originX + laneWidth\n        } else {\n            min = top - originY + minRowSize\n            max = bottom - originY + laneHeight\n        }\n        if (currentChildren.length > 0) {\n            const { right, bottom } = graph.getCellsBBox(currentChildren)\n            min = (dir === 'vertical' ? right - originX : bottom - originY) + swimLanePadding\n        }\n        return {\n            min,\n            max\n        }\n    }\n    startHandler(handler) {\n        const dir = Dom.attr(handler, 'data-dir')\n        const index = Dom.attr(handler, 'data-index')\n        const { min, max } = this.getMovableRange(dir, index)\n        const start = parseInt(Dom.getComputedStyle(handler, dir === 'vertical' ? 'left' : 'top'))\n        const bbox = this.swimlane.getBBox()\n        this.handler = {\n            start,\n            origin: {\n                x: bbox.x,\n                y: bbox.y\n            },\n            target: handler,\n            dir,\n            index,\n            min,\n            max\n        } || null\n        Dom.addClass(handler, `${this.handlerClassName}--active`)\n        Dom.addClass(this.container, `${this.containerClassName}-cursor-${dir}`)\n    }\n    stopHandler() {\n        const { target: handler, dir } = this.handler\n        Dom.removeClass(handler, `${this.handlerClassName}--active`)\n        Dom.removeClass(this.container, `${this.containerClassName}-cursor-${dir}`)\n        this.handler = null\n    }\n    resize() {\n        const { dir, index, offset } = this.handler\n        const type = dir === 'vertical' ? 'col' : 'row'\n        this.swimlane.resize({\n            type,\n            index,\n            offset\n        })\n    }\n    dispose() {\n        this.stopListening()\n        this.container.remove()\n    }\n}","import {  highlightColor, handerSize } from './variables'\n\nexport const content = `\n    .x6-swimlane-transform {\n        position: absolute;\n        box-sizing: content-box !important;\n        margin: -1px;\n        padding-right:600px;\n        padding-bottom:600px;\n        transform-origin: top left;\n        user-select: none;\n        pointer-events: none;\n    }\n    .x6-swimlane-transform-cursor-vertical{\n        user-select: auto;\n        pointer-events: auto;\n        cursor:col-resize;\n    }\n    .x6-swimlane-transform-cursor-horizontal{\n        user-select: auto;\n        pointer-events: auto;\n         cursor:row-resize;\n    }\n    .x6-swimlane-transform-cursor-vertical .x6-swimlane-transform-handler[data-dir=\"horizontal\"],\n    .x6-swimlane-transform-cursor-horizontal .x6-swimlane-transform-handler[data-dir=\"vertical\"]{\n        pointer-events: none;\n    }\n    .x6-swimlane-transform-content{\n        position: relative;\n        width:100%;\n        height:100%;\n    }\n    .x6-swimlane-transform-handler{\n        box-sizing: border-box !important;\n        position: absolute;\n        background-color: transparent;\n        transform-origin: center;\n        pointer-events: auto;\n        user-drag: none;\n        -webkit-user-drag: none;\n    }\n\n    .x6-swimlane-transform-handler[data-dir=\"horizontal\"]{\n        left:0;\n        width:100%;\n        height:${handerSize}px;\n        transform:scale(0.98,1);\n        cursor:row-resize;\n    }\n    .x6-swimlane-transform-handler[data-dir=\"vertical\"]{\n        top:0;\n        width:${handerSize}px;\n        height:100%;\n        transform:scale(1,0.98);\n        cursor:col-resize;\n    }\n    .x6-swimlane-transform-handler:hover,\n    .x6-swimlane-transform-handler--active{\n        background-color: ${highlightColor}; \n    }\n    .x6-swimlane-transform-handler[data-dir=\"vertical\"]:hover,\n    .x6-swimlane-transform-handler--active[data-dir=\"vertical\"]{\n       transform:scale(1.6,0.98);\n    }\n    .x6-swimlane-transform-handler[data-dir=\"horizontal\"]:hover,\n    .x6-swimlane-transform-handler--active[data-dir=\"horizontal\"]{\n        transform:scale(0.98,1.6);\n    }\n`","import { Basecoat, CssLoader } from '@antv/x6'\n\nimport Matrix from './matrix'\nimport { registrySwimlaneTitle, bindTitleEvent, unbindTitleEvent, BASE_LABEL } from './shape/title'\nimport { registrySwimlaneContent } from './shape/content'\nimport { TransfromImpl } from './transfrom'\nimport { swimLaneBaseConfig, swimLanePadding, highlightColor } from './variables'\nimport { content } from './style'\n\nregistrySwimlaneTitle()\nregistrySwimlaneContent()\n\nfunction genSwimLaneItemBBox([i, j], options) {\n    const {\n        position: [originX, originY],\n        rowTitleHeight,\n        columnTitleWidth,\n        laneWidth,\n        laneHeight,\n    } = options\n    return {\n        x: j === 0 ? originX : originX + columnTitleWidth + laneWidth * (j - 1),\n        y: i === 0 ? originY : originY + rowTitleHeight + laneHeight * (i - 1),\n        width: j === 0 ? columnTitleWidth : laneWidth,\n        height: i === 0 ? rowTitleHeight : laneHeight\n    }\n}\nfunction genSwimLaneItemData(index, options, bbox) {\n    const [i, j] = index\n    let shape = 'swimlane-content';\n    let label = ''\n    if (i === 0 || j === 0) {\n        shape = 'swimlane-title'\n        label = BASE_LABEL\n    }\n    bbox = bbox || genSwimLaneItemBBox(index, options)\n    return {\n        shape,\n        blank: i === 0 && j === 0,\n        index,\n        zIndex: 0,\n        label,\n        ...bbox,\n    }\n}\n\n// 群组改变时，自动调整子节点 左侧超出就移动子节点 右侧超出就扩大\nfunction autoResize({ node, currentParent }) {\n    const { graph } = this\n    const selectedCells = graph.getSelectedCells?.() ?? []\n    if (selectedCells.length === 0) {\n        selectedCells.push(node)\n    }\n    const {\n        left,\n        top,\n        right,\n        bottom\n    } = graph.getCellsBBox(selectedCells)\n    const {\n        left: parentLeft,\n        top: parentTop,\n        right: parentRight,\n        bottom: parentBottom,\n    } = currentParent.getBBox()\n\n    const minX = parentLeft + swimLanePadding\n    const minY = parentTop + swimLanePadding\n    const maxX = parentRight - swimLanePadding\n    const maxY = parentBottom - swimLanePadding\n\n    let offetX = 0\n    let offsetY = 0\n    let resizeX = 0\n    let resizeY = 0\n    // 判断左侧是不是在父节点的内，不是的向右移动\n    if (left < minX) {\n        offetX = left - minX\n    }\n    if (top < minY) {\n        offsetY = top - minY\n    }\n\n    // 判断右侧是不是在父节点的内（包含移动后），不是的话 扩展节点宽度\n    const afterMoveChildrenMaxX = right - offetX\n    const afterMoveChildrenMaxY = bottom - offsetY\n    if (afterMoveChildrenMaxX > maxX) {\n        resizeX = afterMoveChildrenMaxX - maxX\n    }\n    if (afterMoveChildrenMaxY > maxY) {\n        resizeY = afterMoveChildrenMaxY - maxY\n    }\n    const { index: [rowIndex, colIndex] } = currentParent.getData()\n    graph.startBatch('batch-move-children')\n    if (offetX !== 0 || offsetY !== 0) {\n        selectedCells.forEach((cell) => {\n            if (!cell.getParent()) {\n                cell.setParent(currentParent)\n            }\n            cell.translate(-offetX, -offsetY)\n        })\n    }\n    if (resizeX) {\n        this.resize({ type: 'col', index: colIndex, offset: resizeX })\n    }\n    if (resizeY) {\n        this.resize({ type: 'row', index: rowIndex, offset: resizeY })\n    }\n    graph.isSelectionEmpty?.()\n    graph.stopBatch('batch-move-children')\n}\n\nexport class SwimLane extends Basecoat {\n    static embeddingHighlightConfig = {\n        name: 'stroke',\n        args: {\n            padding: -5,\n            attrs: {\n                stroke: highlightColor,\n            },\n        },\n    }\n    static isSwimLane({ view, node }) {\n        const shape = node ? node.shape : view ? view.cell.shape : ''\n        return shape.startsWith('swimlane')\n    }\n    static findParentSwimLane(nodes, currentNode) {\n        const bbox = currentNode.getBBox()\n        return nodes.filter((node) => {\n            if (node.shape === 'swimlane-content') {\n                const targetBBox = node.getBBox()\n                // return targetBBox.containsRect(bbox)\n                return bbox.isIntersectWithRect(targetBBox)\n            }\n            return false\n        })\n    }\n    // constructor(options) {\n    constructor() {\n        super()\n        this.name = 'swimlane'\n        this.activating = false\n        // const { position: [x, y], rowTitleHeight } = swimLaneBaseConfig\n        // this.options = Object.assign({}, swimLaneBaseConfig, options)\n        this.options = Object.assign({}, swimLaneBaseConfig, {\n            // 主标题的position\n            // origin: [x, y],\n            //初始化position的还需要放一个主标题，剩余内容从这个位置开始\n            // position: [x, y + rowTitleHeight]\n        })\n        CssLoader.ensure(this.name, content)\n    }\n    init(graph) {\n        this.graph = graph\n        graph.swimlane = this\n        this.initMatrix()\n        this.renderData()\n        this.mainTitleNode = this.initMainTitle()\n        this.transfromImpl = new TransfromImpl({ graph })\n        this.bindEvents()\n    }\n    reset() {\n        const { graph } = this\n        const swimLaneItems = []\n        graph.getNodes().forEach(node => {\n            if (SwimLane.isSwimLane({ node })) {\n                if(!node.subTitle&& !node.blank){\n                    this.mainTitleNode = node\n                }\n                const data = node.getData()\n                data && swimLaneItems.push(data)\n            }\n        })\n        this.resetMatrix(swimLaneItems)\n        this.transfromImpl.updateTransform()\n    }\n    initMatrix() {\n        const { sizes } = this.options\n        const matrix = new Matrix({ sizes })\n        matrix.traverse((item, rowIndex, colIndex) => {\n            const itemData = genSwimLaneItemData([rowIndex, colIndex], this.options)\n            matrix.setValue(rowIndex, colIndex, itemData)\n        })\n        this.matrix = matrix\n    }\n    resetMatrix(data) {\n        this.matrix = new Matrix({ data })\n    }\n    initMainTitle() {\n        const { graph } = this\n        const { rowTitleHeight } = this.options\n        const { x, y, width } = this.getBBox()\n        return graph.addNode({\n            shape: 'swimlane-title',\n            mainTitle: true,\n            x: x,\n            y: y - rowTitleHeight,\n            width: width,\n            height: rowTitleHeight,\n            label: BASE_LABEL\n        })\n    }\n    updateMainTitle() {\n        if (!this.mainTitleNode) {\n            return\n        }\n        const { width } = this.getBBox()\n        const { height } = this.mainTitleNode.size()\n        this.mainTitleNode.size(width, height)\n    }\n\n    getBBox() {\n        const { graph, matrix, matrix: { rows, cols } } = this\n        const { id: firstId } = matrix.getValue(0, 0)\n        const { id: lastId } = matrix.getValue(rows - 1, cols - 1)\n        const firstNode = graph.getCellById(firstId)\n        const lastNode = graph.getCellById(lastId)\n        return graph.getCellsBBox([firstNode, lastNode])\n    }\n    checkRowOrColHasChildren([rowIndex, colIndex]) {\n        let items = []\n        if (rowIndex > 0 && rowIndex < this.matrix.rows) {\n            items = this.matrix.sliceRow(rowIndex, rowIndex + 1, true)\n        }\n        if (colIndex > 0 && colIndex < this.matrix.cols) {\n            items = this.matrix.sliceCol(colIndex, colIndex + 1, true)\n        }\n        return items.some(item => {\n            const cell = this.graph.getCellById(item.id)\n            return cell.children && cell.children.length > 0\n        })\n    }\n    genInsertData(type, index, length, data) {\n        const { laneWidth, laneHeight } = this.options\n        index += 1\n        let increment = 0\n        return Array(length).fill(null).map((item, itemIndex) => {\n            let newDataIndex = []\n            const bbox = {}\n            if (type === 'row') {\n                newDataIndex = [index, itemIndex]\n                const { x, y, width } = data[0][itemIndex]\n                if (itemIndex === 0) {\n                    increment = x\n                }\n                bbox.width = width\n                bbox.height = laneHeight\n                bbox.x = increment\n                bbox.y = y\n                increment += width\n            } else if (type === 'col') {\n                newDataIndex = [itemIndex, index]\n                const { x, y, height } = data[itemIndex][0]\n                if (itemIndex === 0) {\n                    increment = y\n                }\n                bbox.width = laneWidth\n                bbox.height = height\n                bbox.x = x\n                bbox.y = increment\n                increment += height\n            }\n            return genSwimLaneItemData(newDataIndex, this.options, bbox)\n        })\n    }\n    insert(dataIndex) {\n        const [rowIndex, colIndex] = dataIndex\n        const { matrix, matrix: { rows, cols } } = this\n        let length = 0\n        let type = ''\n        let index = 0\n        let current = []\n        if (rowIndex === 0) {\n            type = 'col'\n            index = colIndex\n            length = rows\n            current = matrix.sliceCol(colIndex, colIndex + 1)\n        } else if (colIndex === 0) {\n            type = 'row'\n            index = rowIndex\n            length = cols\n            current = matrix.sliceRow(rowIndex, rowIndex + 1)\n        }\n        const data = this.genInsertData(type, index, length, current)\n        if (type === 'row') {\n            matrix.addRow(index, data)\n        } else if (type === 'col') {\n            matrix.addColumn(index, data)\n        }\n        this.renderData({ type, index })\n    }\n    remove(dataIndex) {\n        const [rowIndex, colIndex] = dataIndex\n        let type = ''\n        let index = 0\n        if (rowIndex === 0) {\n            type = 'col'\n            index = colIndex\n        } else if (colIndex === 0) {\n            type = 'row'\n            index = rowIndex\n        }\n        let removedDatas = []\n        if (type === 'row') {\n            removedDatas = this.matrix.removeRow(index)\n        } else if (type === 'col') {\n            removedDatas = this.matrix.removeColumn(index)\n        }\n        this.renderData({ type, index, removedDatas })\n    }\n    resize({ type, index, offset }) {\n        let needUpdateData = []\n        if (type === 'row') {\n            this.matrix.sliceRow(index).forEach((row, rowIndex) => {\n                row.forEach((col) => {\n                    if (rowIndex === 0) {\n                        col.height += offset\n                    } else {\n                        col.y += offset\n                    }\n                    needUpdateData.push(col)\n                })\n            })\n        } else if (type === 'col') {\n            this.matrix.sliceCol(index).forEach((row) => {\n                row.forEach((col, colIndex) => {\n                    if (colIndex === 0) {\n                        col.width += offset\n                    } else {\n                        col.x += offset\n                    }\n                    needUpdateData.push(col)\n                })\n            })\n        }\n        this.renderData({ type, index, updatedDatas: needUpdateData })\n    }\n    renderData({ type, index, updatedDatas, removedDatas } = {}) {\n        const { rows, cols } = this.matrix\n        if (!Array.isArray(updatedDatas) || updatedDatas.length === 0) {\n            if (type === 'row') {\n                updatedDatas = this.matrix.sliceRow(index, rows, true)\n            } else if (type === 'col') {\n                updatedDatas = this.matrix.sliceCol(index, cols, true)\n            } else {\n                updatedDatas = this.matrix.flat()\n            }\n        }\n\n        const { graph, matrix } = this\n\n        graph.startBatch('render-data')\n        if (removedDatas && removedDatas.length > 0) {\n            removedDatas.forEach(item => {\n                const { id } = item\n                if (id) {\n                    const node = graph.getCellById(id)\n                    const children = node.getChildren()\n                    if (children && children.length > 0) {\n                        children.forEach(child => {\n                            node.remove(child)\n                        })\n                    }\n                    graph.removeNode(node)\n                }\n            })\n        }\n        if (updatedDatas && updatedDatas.length > 0) {\n            updatedDatas.forEach((item) => {\n                const { id, index, x, y, width, height } = item\n                if (id) {\n                    const node = graph.getCellById(id)\n                    const children = node.getChildren()\n                    if (children && children.length > 0) {\n                        children.forEach(child => {\n                            const relativePos = child.position({ relative: true })\n                            child.position(x + relativePos.x, y + relativePos.y)\n                        })\n                    }\n                    node.resize(width, height)\n                    node.position(x, y)\n                    node.updateData({ index, x, y, width, height })\n                } else {\n                    const { index, ...other } = item\n                    const node = graph.addNode({\n                        ...other,\n                        data: item\n                    })\n                    node.updateData({ id: node.id })\n                    // node.attr('text/text', node.id.substring(0, 4))\n                    matrix.setValue(...index, {\n                        ...item,\n                        id: node.id\n                    })\n                }\n\n            })\n        }\n        this.updateMainTitle()\n        graph.stopBatch('render-data')\n        graph.emit('swimlane:rendered', { matrix })\n    }\n    bindEvents() {\n        const { graph, reset } = this\n        graph.on('node:embedded', autoResize, this)\n        graph.on('render:done', reset, this)\n        bindTitleEvent(graph)\n    }\n    unbindEvents() {\n        const { graph, reset } = this\n        graph.off('node:embedded', autoResize, this)\n        graph.off('render:done', reset, this)\n        unbindTitleEvent(graph)\n    }\n    setData() { }\n    dispose() {\n        this.transfromImpl.dispose()\n        this.unbindEvents()\n        CssLoader.clean(this.name)\n    }\n}","<script setup>\nimport { ref, onMounted } from 'vue'\nimport { Graph } from '@antv/x6'\nimport { Dnd } from '@antv/x6-plugin-dnd'\n// import { Selection } from '@antv/x6-plugin-selection'\n// import { History } from '@antv/x6-plugin-history'\nimport { SwimLane } from './swimlane'\nimport data from './data.json'\n\nconsole.log(data)\nconst container = ref()\nconst dndContainer = ref()\n\nlet graph = null\nlet dnd = null\n\nconst testNode = {\n  width: 100,\n  height: 40,\n  label: 'Rect',\n  attrs: {\n    body: {\n      stroke: '#8f8f8f',\n      strokeWidth: 1,\n    },\n  },\n}\n\nfunction handleStartDrag(e) {\n  // const target = e.target\n  // const type = target.getAttribute('data-type')\n  const node = graph.createNode(testNode)\n  dnd.start(node, e)\n}\n// function exportGraphToJson() {\n//   // 获取图的 JSON 数据\n//   const jsonData = graph.toJSON();\n\n//   // 将 JSON 数据转换为字符串\n//   const jsonString = JSON.stringify(jsonData, null, 2);\n\n//   // 创建 Blob 对象\n//   const blob = new Blob([jsonString], { type: 'application/json' });\n\n//   // 创建一个链接元素\n//   const a = document.createElement('a');\n//   a.href = URL.createObjectURL(blob);\n//   a.download = 'graph-data.json'; // 下载的文件名\n\n//   // 触发下载\n//   document.body.appendChild(a);\n//   a.click();\n//   document.body.removeChild(a);\n// }\nfunction handleLoadData() {\n  graph.fromJSON(data)\n}\n\nonMounted(() => {\n\n  window.__x6_instances__ = []\n\n  graph = new Graph({\n    container: container.value,\n    autoResize: true,\n    grid: true,\n    panning: true,\n    mousewheel: {\n      enabled: true,\n      global: true,\n      modifiers: ['ctrl', 'meta'],\n    },\n    interacting: {\n      nodeMovable(view) {\n        return !SwimLane.isSwimLane({ view })\n      },\n    },\n    embedding: {\n      enabled: true,\n      findParent({ node }) {\n        const nodes = this.getNodes()\n        return SwimLane.findParentSwimLane(nodes, node)\n      },\n    },\n    highlighting: {\n      embedding: SwimLane.embeddingHighlightConfig\n    },\n  })\n\n  window.graph = graph\n\n  // graph.use(new Selection({\n  //   enabled: true,\n  //   multiple: true,\n  //   movable: true,\n  //   rubberband: true,\n  //   showNodeSelectionBox: true,\n  //   modifiers: ['shift'],\n  //   filter: (node) => {\n  //     return !SwimLane.isSwimLane({ node })\n  //   },\n  // }))\n\n  dnd = new Dnd({\n    scaled: false,\n    target: graph,\n    dndContainer: dndContainer.value,\n  })\n  graph.use(dnd)\n\n  graph.use(new SwimLane())\n\n  // graph.use(\n  //   new History({\n  //     enabled: true,\n  //     beforeAddCommand(event, args) {\n  //       // 忽略历史变更\n  //       if (args.options.ignoreHistory) {\n  //         return false\n  //       }\n  //     },\n  //   }),\n  // )\n\n  // graph.addNode({\n  //   x: 100,\n  //   y: 20,\n  //   ...testNode\n  // })\n  // graph.addNode({\n  //   x: 200,\n  //   y: 20,\n  //   ...testNode\n  // })\n  // graph.addNode({\n  //   x: 100,\n  //   y: 60,\n  //   ...testNode\n  // })\n  // graph.addNode({\n  //   x: 200,\n  //   y: 60,\n  //   ...testNode\n  // })\n\n  // setTimeout(() => {\n  //   graph.centerContent()\n  // }, 1000)\n\n  window.__x6_instances__.push(graph)\n})\n// function handleUndo() {\n//   graph.undo()\n// }\n// function handleRedo() {\n//   graph.redo()\n// }\n\n</script>\n\n<template>\n  <div class=\"x6-app\">\n    <div class=\"dnd\" ref=\"dndContainer\">\n      <div class=\"btn-container\">\n        <!-- <button @click=\"handleUndo\">撤销</button>\n      <button @click=\"handleRedo\">重做</button> -->\n        <!-- <button @click=\"exportGraphToJson\">download</button> -->\n        <button @click=\"handleLoadData\">load data</button>\n      </div>\n      <div data-type=\"rect\" class=\"rect\" @mousedown=\"handleStartDrag\">rect</div>\n    </div>\n    <div class=\"container\">\n      <div ref=\"container\"></div>\n    </div>\n\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.x6-app {\n  width: 100%;\n  height: 100%;\n  display: flex;\n\n  .dnd {\n    box-sizing: border-box;\n    width: 200px;\n    flex: 0 0 240px;\n    padding: 40px 20px;\n    border-right: 2px solid #666;\n\n    .btn-container{\n      position: absolute;\n      top:10px;\n      left:20px;\n      display: flex;\n      width:200px;\n    }\n    .rect {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background: #fff;\n      width: 100px;\n      height: 40px;\n      border: 2px solid #8f8f8f;\n      cursor: pointer;\n    }\n  }\n\n  .container {\n    flex: 1;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background: #fff;\n  }\n}\n</style>\n","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=460716cb&lang=scss&scoped=true\"\n\nimport exportComponent from \"../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-460716cb\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport './style.css'\nimport App from './App.vue'\nimport 'element-plus/dist/index.css'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkswimlane\"] = self[\"webpackChunkswimlane\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(8495); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["Matrix","constructor","options","data","sizes","Array","isArray","length","this","initByData","initBySizes","rows","cols","Error","from","fill","maxRow","maxCol","forEach","item","index","rowIndex","colIndex","matrix","console","log","traverse","callback","i","j","flat","sliceRow","start","end","flatten","slice","sliceCol","result","flattenResult","row","col","push","getValue","isValidIndex","setValue","value","addRow","values","splice","updateRowIndexFrom","removeRow","removedItems","addColumn","updateColumnIndexFrom","removeColumn","startRow","baseRowItem","y","height","startY","startCol","x","width","startX","updateRowFrom","updateColumnFrom","getCrossPath","strokeWidth","margin","horizontalLine","getLinePath","verticalLine","isHorizontal","size","Math","min","offsetX","offsetY","horizontalStartX","horizontalStartY","horizontalEndX","verticalStartX","verticalStartY","verticalEndY","fillColor","strokeColor","labelColor","swimLanePadding","handerSize","highlightColor","swimLaneBaseConfig","position","laneWidth","laneHeight","rowTitleHeight","columnTitleWidth","BASE_LABEL","TITLE_BTN_WIDTH","TITLE_BTN_HEIGHT","RADIUS","MAIN_TITLE_LABEL_OFFSET","TITLE_BTN_RECT_ATTRS","rx","ry","stroke","cursor","TITLE_BTN_ICON_ATTRS","pointerEvents","getTitleButtonToolMarkup","type","tagName","selector","attrs","d","addTitleButton","Button","define","markup","onClick","e","cell","view","stopPropagation","graph","getData","swimlane","insert","removeTitleButton","hasChildren","checkRowOrColHasChildren","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","remove","titleShape","inherit","body","label","fontWeight","propHooks","metadata","mainTitle","blank","subTitle","others","ObjectExt","tools","name","args","color","backgroundColor","isSwimLaneSubTitle","node","shape","prop","addTitleTools","isRowTitle","addTool","offset","hasTool","addTools","ignoreHistory","minSize","removeTool","removeTitleTools","registrySwimlaneTitle","Graph","registerNode","registerNodeTool","titleMouseenter","titleMouseleave","bindTitleEvent","on","unbindTitleEvent","off","contentShape","registrySwimlaneContent","minRowSize","minColSize","documentEvents","mousemove","touchmove","mouseup","touchend","TransfromImpl","View","super","_defineProperty","FunctionExt","handler","evt","normalizeEvent","clientX","clientY","target","origin","dir","max","pos","clientToLocal","axis","positionKey","Dom","render","startListening","containerClassName","prefixClassName","contentClassName","handlerClassName","initContainer","updateTransform","container","content","updateHandlers","createHandlers","createHorizontalHandlers","handers","top","createVerticalHandlers","firstCols","left","horizontalHandlers","verticalHandlers","concat","updateContainer","ctm","bbox","getBBox","a","f","transform","delegateEvents","delegateDocumentEvents","stopListening","undelegateEvents","undelegateDocumentEvents","startResizing","startHandler","onMouseUp","resize","stopHandler","getMovableRange","originX","originY","swimLaneItems","currentChildren","swimLaneNodes","Number","nextIndex","id","getCellById","children","getChildren","bottom","right","getCellsBBox","parseInt","dispose","genSwimLaneItemBBox","genSwimLaneItemData","zIndex","autoResize","currentParent","selectedCells","getSelectedCells","parentLeft","parentTop","parentRight","parentBottom","minX","minY","maxX","maxY","offetX","resizeX","resizeY","afterMoveChildrenMaxX","afterMoveChildrenMaxY","startBatch","getParent","setParent","translate","isSelectionEmpty","stopBatch","SwimLane","Basecoat","isSwimLane","startsWith","findParentSwimLane","nodes","currentNode","filter","targetBBox","isIntersectWithRect","activating","Object","assign","CssLoader","init","initMatrix","renderData","mainTitleNode","initMainTitle","transfromImpl","bindEvents","reset","getNodes","resetMatrix","itemData","addNode","updateMainTitle","firstId","lastId","firstNode","lastNode","items","some","genInsertData","increment","map","itemIndex","newDataIndex","dataIndex","current","removedDatas","needUpdateData","updatedDatas","child","removeNode","relativePos","relative","updateData","other","emit","unbindEvents","setData","padding","ref","dndContainer","dnd","testNode","handleStartDrag","createNode","handleLoadData","fromJSON","onMounted","window","__x6_instances__","grid","panning","mousewheel","enabled","global","modifiers","interacting","nodeMovable","embedding","findParent","highlighting","embeddingHighlightConfig","Dnd","scaled","use","__exports__","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","keys","every","key","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}